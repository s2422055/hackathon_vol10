<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>çŒ«ãƒãƒ£ãƒƒãƒˆAI</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@400;700&display=swap');
body {
    font-family: 'M PLUS Rounded 1c', sans-serif;
    background-color: #fff0f5;
    margin: 0;
    display: flex;
    flex-direction: column;
    height: 100vh;
}
header {
    background-color: #ffb6c1;
    padding: 10px 20px; /* å°‘ã—ä½™ç™½ã‚’èª¿æ•´ */
    border-bottom: 3px solid #ff69b4;
    /* â–¼â–¼â–¼ ä»¥ä¸‹ã‚’è¿½åŠ  â–¼â–¼â–¼ */
    display: flex;
    justify-content: space-between;
    align-items: center;
}
.chat-box {
    flex: 1;
    padding: 10px;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
}
.message {
    max-width: 70%;
    margin: 8px 0;
    padding: 10px;
    border-radius: 15px;
}
.user {
    background-color: #ffdab9;
    align-self: flex-end;
}
.cat {
    background-color: #ffe4e1;
    align-self: flex-start;
}
.input-area {
    display: flex;
    padding: 10px;
    border-top: 2px solid #ff69b4;
}
input {
    flex: 1;
    padding: 10px;
    border: 2px solid #ff69b4;
    border-radius: 20px;
    outline: none;
}
button {
    margin-left: 10px;
    padding: 10px 20px;
    background-color: #ff69b4;
    color: white;
    border: none;
    border-radius: 20px;
    cursor: pointer;
}
button:hover {
    background-color: #ff1493;
}
.chat-container {
    display: flex;
    flex-direction: column;
}
.header-title {
    font-size: 1.5em;
    font-weight: bold;
}

.nav-buttons {
    display: flex;
    align-items: center;
    gap: 15px; /* ãƒœã‚¿ãƒ³é–“ã®ã‚¹ãƒšãƒ¼ã‚¹ */
}

.nav-btn {
    display: inline-block;
    padding: 8px 16px;
    background-color: #f48fb1;
    color: white;
    border: none;
    border-radius: 20px;
    cursor: pointer;
    text-decoration: none; /* ãƒªãƒ³ã‚¯ã®ä¸‹ç·šã‚’æ¶ˆã™ */
    font-size: 0.9em;
    font-weight: bold;
    transition: background-color 0.2s;
}

.nav-btn:hover {
    background-color: #ec407a;
}

.logout-btn {
    background-color: #ef9a9a; /* ãƒ­ã‚°ã‚¢ã‚¦ãƒˆãƒœã‚¿ãƒ³ã ã‘å°‘ã—è‰²ã‚’å¤‰ãˆã‚‹ */
}

.logout-btn:hover {
    background-color: #e57373;
}
</style>
</head>
<body>
<header>
    <span class="header-title">ğŸ¾ çŒ«AIãƒãƒ£ãƒƒãƒˆ ğŸ¾</span>
    <div class="nav-buttons">
        <a href="homepage.php" class="nav-btn">å‹•ç‰©é¸æŠã«æˆ»ã‚‹</a>
        <form action="logout.php" method="POST" style="margin: 0;">
            <button type="submit" class="nav-btn logout-btn">ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</button>
        </form>
    </div>
</header>
<div class="chat-box" id="chatBox"></div>
<div class="input-area">
    <input type="text" id="message" placeholder="ã«ã‚ƒãƒ¼ï¼Ÿï¼ˆå…¥åŠ›ã—ã¦ã«ã‚ƒï¼‰">
    <button onclick="sendMessage()">é€ä¿¡</button>
</div>

<script>
async function sendMessage() {
    const input = document.getElementById('message');
    const message = input.value.trim();
    if (!message) return;

    addMessage(message, 'user');
    input.value = '';

    const res = await fetch('chat.php', {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify({message})
    });
    const data = await res.json();

    addMessage(data.reply || "ã«ã‚ƒãƒ¼ï¼Ÿï¼ˆã‚¨ãƒ©ãƒ¼ã ã«ã‚ƒï¼‰", 'cat');
}

function addMessage(text, type) {
    const chatBox = document.getElementById('chatBox');
    const msg = document.createElement('div');
    msg.className = `message ${type}`;
    msg.textContent = text;
    chatBox.appendChild(msg);
    chatBox.scrollTop = chatBox.scrollHeight;
}
</script>
</body>
</html>